(self["webpackChunkonline_shop_frontend"]=self["webpackChunkonline_shop_frontend"]||[]).push([[182],{8601:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Z}});var r=n(3396),o=n(7139),s=n.p+"img/delete.70da9415.png";const i=t=>((0,r.dD)("data-v-2261c0d9"),t=t(),(0,r.Cn)(),t),u={class:"cart flex-col"},a={class:"cart-list flex-col align-items-center"},l=i((()=>(0,r._)("h1",{class:"h1"},"購物車清單",-1))),c={key:0,class:"h2"},p=["onClick"],d={class:"cart-img flex-row justify-content-center align-items-center"},m=["src"],g={class:"cart-info flex-col justify-content-around"},h={class:"text-red"},_={class:"cart-num flex-row justify-content-center"},f=["onClick"],x=["value","onInput"],y=["onClick"];function b(t,e,i,b,v,k){const L=(0,r.up)("OrderForm");return(0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("ul",a,[l,v.isCartEmpty?((0,r.wg)(),(0,r.iD)("p",c,"購物車沒有任何商品...")):(0,r.kq)("",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(v.productList,((t,e)=>((0,r.wg)(),(0,r.iD)("li",{class:"cart-list-item flex-row align-items-center",key:e},[(0,r._)("img",{class:"cursor-ptr",src:s,style:{height:"30px"},onClick:e=>k.deleteProduct(t)},null,8,p),(0,r._)("div",d,[(0,r._)("img",{src:n(8104)("./"+t.imgUrl)},null,8,m)]),(0,r._)("div",g,[(0,r._)("p",null,(0,o.zw)(t.name),1),(0,r._)("p",h,"$"+(0,o.zw)(t.price),1)]),(0,r._)("div",_,[(0,r._)("button",{onClick:t=>k.changeProductNum(e,"-")},"-",8,f),(0,r._)("input",{class:"text-align-center",value:v.productList[e].num,onInput:t=>k.inputProductNum(t.target.value,e),onkeyup:"value=value.replace(/[^\\d]/g,'') ",maxlength:"2"},null,40,x),(0,r._)("button",{onClick:t=>k.changeProductNum(e,"+")},"+",8,y)])])))),128))]),(0,r.Wm)(L,{total:v.total,productList:v.productList},null,8,["total","productList"])])}var v=n(9242);const k=t=>((0,r.dD)("data-v-5194d7ab"),t=t(),(0,r.Cn)(),t),L={class:"order flex-col align-items-center"},w=k((()=>(0,r._)("h1",{class:"h1"},"訂單資料",-1))),C=k((()=>(0,r._)("label",null,"電子信箱",-1))),I=k((()=>(0,r._)("label",null,"姓名",-1))),N=k((()=>(0,r._)("label",null,"電話號碼",-1))),D=k((()=>(0,r._)("label",null,"收件地址",-1))),O=k((()=>(0,r._)("label",null,"備註",-1))),T={class:"total flex-row justify-content-between"},U=k((()=>(0,r._)("p",{class:"h2"},"購物車總計",-1))),P={class:"h2 text-red"},E=k((()=>(0,r._)("input",{type:"submit",class:"send-order-btn",value:"送出訂單"},null,-1)));function V(t,e,n,s,i,u){return(0,r.wg)(),(0,r.iD)("div",L,[w,(0,r._)("form",{class:"order-form flex-row flex-wrap",onSubmit:e[5]||(e[5]=(0,v.iM)(((...t)=>u.sendOrder&&u.sendOrder(...t)),["prevent"]))},[C,(0,r.wy)((0,r._)("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=t=>i.orderInfo.email=t),required:""},null,512),[[v.nr,i.orderInfo.email]]),(0,r._)("div",null,[I,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>i.orderInfo.name=t),maxlength:"10",required:""},null,512),[[v.nr,i.orderInfo.name]])]),(0,r._)("div",null,[N,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>i.orderInfo.phoneNum=t),pattern:"^\\d{10}$",maxlength:"10",required:""},null,512),[[v.nr,i.orderInfo.phoneNum]])]),D,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>i.orderInfo.address=t),maxlength:"50",required:""},null,512),[[v.nr,i.orderInfo.address]]),O,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>i.orderInfo.note=t),maxlength:"50"},null,512),[[v.nr,i.orderInfo.note]]),(0,r._)("div",T,[U,(0,r._)("p",P,"$"+(0,o.zw)(n.total),1)]),E],32)])}var j=n(3543),q={props:["total","productList"],data(){return{orderInfo:{email:"",name:"",phoneNum:"",address:"",note:""}}},methods:{sendOrder(){if(0===this.productList.length)return alert("購物車無商品..."),!1;(0,j.yT)({orderInfo:this.orderInfo,productList:this.productList}).then((t=>{alert(t.data.message),t.data.isSuccess&&this.$router.replace({path:"/users/transaction"})}))}}},$=n(89);const z=(0,$.Z)(q,[["render",V],["__scopeId","data-v-5194d7ab"]]);var F=z,S={name:"CartView",data(){return{productList:[],total:0,isCartEmpty:!0}},methods:{getCart(){(0,j.S4)().then((t=>{this.productList=t.data;for(let e=0;e<this.productList.length;e++)this.productList[e]={...this.productList[e],num:1};0===t.data.length?(this.isCartEmpty=!0,this.total=0):this.isCartEmpty=!1,this.computeTotal()}))},deleteProduct(t){(0,j.ok)(t._id).then((e=>{alert(e.data.message+"\n"+t.name),this.getCart()}))},changeProductNum(t,e){"+"===e?this.productList[t].num=++this.productList[t].num:"-"===e&&this.productList[t].num>1&&(this.productList[t].num=--this.productList[t].num),this.computeTotal()},computeTotal(){this.total=0;for(let t=0;t<this.productList.length;t++)this.total=this.total+this.productList[t].price*this.productList[t].num},inputProductNum(t,e){if(0===t.length||" "===t[0])return this.productList[e].num=1,this.computeTotal(),!1;for(let n=0;n<t.length;n++)if(0===n&&"0"===t[n]||!(t[n]<="9"&&t[n]>="0"))return this.productList[e].num=1,this.computeTotal(),!1;this.productList[e].num=parseInt(t),this.computeTotal()}},mounted(){this.getCart()},components:{OrderForm:F}};const M=(0,$.Z)(S,[["render",b],["__scopeId","data-v-2261c0d9"]]);var Z=M},8104:function(t,e,n){var r={"./keyboard_1.png":968,"./keyboard_2.png":6966,"./keyboard_3.png":1996,"./laptop_1.png":2950,"./mouse_1.png":9611,"./mouse_2.png":1575,"./mouse_3.png":4431,"./mouse_4.png":1737,"./mouse_5.png":6764,"./mouse_6.png":9569,"./mouse_7.png":2284,"./speaker_1.png":5489,"./speaker_2.png":6080};function o(t){var e=s(t);return n(e)}function s(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}o.keys=function(){return Object.keys(r)},o.resolve=s,t.exports=o,o.id=8104},968:function(t,e,n){"use strict";t.exports=n.p+"img/keyboard_1.998567ec.png"},6966:function(t,e,n){"use strict";t.exports=n.p+"img/keyboard_2.a6ab42ed.png"},1996:function(t,e,n){"use strict";t.exports=n.p+"img/keyboard_3.112aab51.png"},2950:function(t,e,n){"use strict";t.exports=n.p+"img/laptop_1.2c49de86.png"},9611:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_1.82ad4a51.png"},1575:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_2.6763a1d0.png"},4431:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_3.dd8beabc.png"},1737:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_4.3563bcd6.png"},6764:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_5.ea2f6e77.png"},9569:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_6.cb526824.png"},2284:function(t,e,n){"use strict";t.exports=n.p+"img/mouse_7.c5802086.png"},5489:function(t,e,n){"use strict";t.exports=n.p+"img/speaker_1.5217f6b4.png"},6080:function(t,e,n){"use strict";t.exports=n.p+"img/speaker_2.21a225cb.png"}}]);
//# sourceMappingURL=182.5863cad0.js.map